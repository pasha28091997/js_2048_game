!function(){var t,e={},r=new((t=function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.board=t||this.createEmptyBoard(),this.score=0,this.status="idle"}return t=[{key:"createEmptyBoard",value:function(){return[,,,,].fill().map(function(){return[,,,,].fill(0)})}},{key:"moveLeft",value:function(){var t=!1,e=!0,r=!1,a=void 0;try{for(var n,o=this.board[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value,s=this.merge(this.slide(i));this.arraysEqual(i,s)||(t=!0),Object.assign(i,s)}}catch(t){r=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw a}}t&&this.addRandomTile()}},{key:"moveRight",value:function(){var t=!1,e=!0,r=!1,a=void 0;try{for(var n,o=this.board[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value,s=i.slice().reverse(),l=this.merge(this.slide(s)).reverse();this.arraysEqual(i,l)||(t=!0,Object.assign(i,l))}}catch(t){r=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw a}}t&&this.addRandomTile()}},{key:"moveUp",value:function(){for(var t=!1,e=0;e<4;e++){var r=this.getColumn(e),a=this.merge(this.slide(r));this.arraysEqual(r,a)||(t=!0,this.setColumn(e,a))}t&&this.addRandomTile()}},{key:"moveDown",value:function(){for(var t=!1,e=0;e<4;e++){var r=this.getColumn(e).reverse(),a=this.merge(this.slide(r)).reverse();this.arraysEqual(r,a)||(t=!0,this.setColumn(e,a))}t&&this.addRandomTile()}},{key:"getColumn",value:function(t){for(var e=[],r=0;r<4;r++)e.push(this.board[r][t]);return e}},{key:"setColumn",value:function(t,e){for(var r=0;r<4;r++)this.board[r][t]=e[r]}},{key:"slide",value:function(t){for(var e=t.filter(function(t){return 0!==t});e.length<4;)e.push(0);return e}},{key:"merge",value:function(t){for(var e=0;e<t.length-1;e++)0!==t[e]&&t[e]===t[e+1]&&(t[e]*=2,t[e+1]=0,this.score+=t[e]);return this.slide(t)}},{key:"arraysEqual",value:function(t,e){return t.length===e.length&&t.every(function(t,r){return t===e[r]})}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){var t=this;return this.board.some(function(t){return t.includes(2048)})?"win":this.board.some(function(e,r){return e.some(function(a,n){return 0===a||n<3&&a===e[n+1]||r<3&&a===t.board[r+1][n]})})?"playing":"lose"}},{key:"start",value:function(){"idle"===this.status&&(this.status="playing",this.addRandomTile(),this.addRandomTile())}},{key:"restart",value:function(){this.board=this.createEmptyBoard(),this.score=0,this.status="idle",this.start()}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<this.board.length;e++)for(var r=0;r<this.board[e].length;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(t.length>0){var a=t[Math.floor(Math.random()*t.length)],n=a.row,o=a.col;this.board[n][o]=.9>Math.random()?2:4}}}],function(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(e.prototype,t),e}())&&t.__esModule?t.default:t),a=!1;function n(){var t=r.getState(),e=r.getScore(),a=r.getStatus();document.querySelector(".game-score").textContent=e;var n=document.querySelectorAll(".field-cell"),o=0,i=!0,s=!1,l=void 0,u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var v=h.value;try{for(var y,m=v[Symbol.iterator]();!(i=(y=m.next()).done);i=!0){var g=y.value,b=n[o];b.className="field-cell",0!==g?(b.classList.add("field-cell--".concat(g)),b.textContent=g):b.textContent="",o++}}catch(t){s=!0,l=t}finally{try{i||null==m.return||m.return()}finally{if(s)throw l}}}}catch(t){c=!0,d=t}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}document.querySelector(".message-start").classList.add("hidden"),document.querySelector(".message-lose").classList.toggle("hidden","lose"!==a),document.querySelector(".message-win").classList.toggle("hidden","win"!==a);var k=document.querySelector(".button.start");"idle"===a?(k.textContent="Start",k.classList.remove("restart")):(k.textContent="Restart",k.classList.add("restart"))}document.addEventListener("keydown",function(t){if(a&&"playing"===r.getStatus()){switch(t.key){case"ArrowLeft":r.moveLeft();break;case"ArrowRight":r.moveRight();break;case"ArrowUp":r.moveUp();break;case"ArrowDown":r.moveDown();break;default:return}n()}}),document.querySelector(".button.start").addEventListener("click",function(){"idle"===r.getStatus()?r.start():r.restart(),a=!0,n()})}();
//# sourceMappingURL=index.b46f2b7e.js.map
